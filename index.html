<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥—ã–º–æ—Ö–æ–¥–∞</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; }
    label { display: block; margin-top: 1em; }
    input, select { margin-top: 0.5em; }
    #result { margin-top: 2em; padding: 1em; border: 1px solid #ccc; }
    button { margin-top: 1.5em; }
  </style>
  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <h1>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥—ã–º–æ—Ö–æ–¥–∞</h1>
  <form id="chimneyForm">
    <label>–î–∏–∞–º–µ—Ç—Ä —Ç—Ä—É–±—ã (–º–º)
      <select name="diameter" required>
        <option value="115">115</option>
        <option value="120">120</option>
        <option value="150">150</option>
        <option value="200">200</option>
      </select>
    </label>
    <label>–í—ã—Å–æ—Ç–∞ (–º)
      <input type="number" name="height" min="2" max="10" value="5" required>
    </label>
    <label>–ú–∞—Ç–µ—Ä–∏–∞–ª
      <select name="material" required>
        <option value="steel">–ù–µ—Ä–∂–∞–≤–µ—é—â–∞—è —Å—Ç–∞–ª—å</option>
        <option value="ceramic">–ö–µ—Ä–∞–º–∏–∫–∞</option>
      </select>
    </label>
    <label>–£—Ç–µ–ø–ª–µ–Ω–∏–µ
      <select name="insulation" required>
        <option value="none">–ë–µ–∑ —É—Ç–µ–ø–ª–µ–Ω–∏—è</option>
        <option value="basic">–ë–∞–∑–æ–≤–æ–µ</option>
        <option value="premium">–ü—Ä–µ–º–∏—É–º</option>
      </select>
    </label>
    <button type="submit">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
  </form>
  <div id="result"></div>
  <button id="sendBtn" style="display:none;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–¥–º–∏–Ω—É</button>

  <script>
    let resultText = '';
    document.getElementById('chimneyForm').addEventListener('submit', function(e){
      e.preventDefault();
      const data = Object.fromEntries(new FormData(this).entries());
      let price = 10000 + Number(data.diameter) * 10 + Number(data.height) * 1000;
      if(data.material === 'ceramic') price += 5000;
      if(data.insulation === 'basic') price += 2000;
      if(data.insulation === 'premium') price += 5000;
      resultText = `
        üöß <b>–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á—ë—Ç–∞ –¥—ã–º–æ—Ö–æ–¥–∞:</b>\n
        ‚Ä¢ –î–∏–∞–º–µ—Ç—Ä: ${data.diameter} –º–º\n
        ‚Ä¢ –í—ã—Å–æ—Ç–∞: ${data.height} –º\n
        ‚Ä¢ –ú–∞—Ç–µ—Ä–∏–∞–ª: ${data.material === 'steel' ? '–ù–µ—Ä–∂–∞–≤–µ—é—â–∞—è —Å—Ç–∞–ª—å' : '–ö–µ—Ä–∞–º–∏–∫–∞'}\n
        ‚Ä¢ –£—Ç–µ–ø–ª–µ–Ω–∏–µ: ${
          data.insulation === 'none' ? '–ë–µ–∑ —É—Ç–µ–ø–ª–µ–Ω–∏—è' :
          data.insulation === 'basic' ? '–ë–∞–∑–æ–≤–æ–µ' : '–ü—Ä–µ–º–∏—É–º'
        }\n
        <b>–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–∞—è —Ü–µ–Ω–∞: ${price} —Ä—É–±.</b>
      `;
      document.getElementById('result').innerHTML = resultText.replace(/\n/g, "<br>");
      document.getElementById('sendBtn').style.display = "block";
    });

    // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∞–¥–º–∏–Ω—É —á–µ—Ä–µ–∑ Telegram Web Apps API
    document.getElementById('sendBtn').onclick = function() {
      if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.sendData(resultText); // –≠—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É (–æ–Ω–∏ –ø—Ä–∏–¥—É—Ç —Ç–µ–±–µ –∫–∞–∫ –∞–¥–º–∏–Ω—É)
        Telegram.WebApp.close(); // –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
      } else {
        alert("–û—Ç–∫—Ä—ã–≤–∞–π —á–µ—Ä–µ–∑ Telegram –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∞–¥–º–∏–Ω—É!");
      }
    };
  </script>
</body>
</html>
